项目经历





**项目介绍：**

为了帮助大型和超大型企业完成企业信息化，公司在原本的SHR的基础上，重新基于苍穹平台研发HR管理系统，离职管理是该系统的一个重要应用模块，应用包含离职工作台，离职申请，离职档案，离职活动管理等功能。这一系统已成功应用于山西国运、建行、吉利、象屿等多家世界500强企业。

**设计技术：**

- 公司采用了RabbitMQ技术，通过发送消息给人事事务来实现自动更新人员主数据。在人事事务中，可以配置人员和离职单据字段的映射关系，使该系统可以根据用户需求进行灵活扩展。大幅减少了客户现场二次开发所需的时间和人力成本。
- 使用TCC来处理离职和组织的分布式事务，保证事务的强一致性，并且协调器还提供自动重试、手动重试和告警等功能，用于管理整个事务流程并及时解决可能出现的问题。
-  通过Redis 高可用集群，缓存存储用户的权限信息，包括角色、权限列表。能够快速、可靠地缓存和读取用户的权限信息。
- 采用微服务架构，离职作为流程单据，与人员主数据部署在不同容器中，通过RPC调用人员提供的微服务接口实现数据查询。

**技术栈：** 容器化部署，微服务架构，Dubbo，RabbitMQ，TCC，Redis

**个人职责：**

- 担任离职与员工自助小组组长，负责协调组内公共事务和外部交接，以及项目进度的管理。
- 负责进行离职管理需求分析和数据库建模工作，确保系统设计符合业务需求。
- 负责开发离职代申请和员工离职申请单据，确保单据准确记录和处理离职流程中的各个环节。
- 参与离职办理单据和离职工作台的需求开发，以提供全面支持，使离职流程更高效透明。



亮点和难点， 遇到了什么麻烦的场景，选择了什么方案去解决的

#### 1. 人事事务应用

离职管理作为过程数据，在单据上显示人员字段信息的时候，那么就需要从人员服务查询人员信息，在流程中会去修改人员的字段，修改完以后在通过发mq修改人员信息。即字段存在映射关系 人员-离职-人员

这种方式当时存在的问题：

（1）客户字段的扩展性问题：对于客户来说，要修改的人员字段不是我们标准产品中的字段，而是其他的字段，这个时候只能去修改源代码，在代码中重新维护这个映射关系

（2）人员操作扩展性问题：对于人员的操作，不仅仅只有离职，还有调动，兼职，外派等其他事务，甚至离职操作都要细分为正式员工离职，实习生离职等事务，这些事务都需要从人员取数据，事务生效后再同步回人员。每个事务都需要在代码中去维护取值，改值

（3）事务间存在互斥关系，比如在离职事务发起的时候，就不能发起调动事务，需要进行跨服务的校验

为了解决以上问题，有了人事事务应用

（1） 所有对于人员数据修改的变动事务都需要在人事事务应用注册

（1）页面配置每个变动操作的人员和流程的字段映射关系，事务生效以后，发送mq消息给人事事务，人事事务通过映射关系，修改人员主数据中相应字段

（2）人事事务校验配置，事务提交前调人事事务的RPC接口，获取人事事务的校验结果

#### 2. 



**项目介绍**：针对的场景是企业员工在企业内部发生组织岗位的调整，该项目为企业HR提供了三种人员的调动方式，调入/调出，快速调动，批量调动。并且调入/调出单据会根据不同的审批阶段进行数据的权限隔离。

**设计技术**：

- 调动异常补偿，解决调动在与上下游协同处理时数据不一致的问题，包括MQ同步失败，RPC接口调用失败。记录入参、出参、错误堆栈，调用时间、单据编号等，并且提供重试按钮，帮助开发、测试、运维人员快速定位问题，而不用去查看日志定位问题。
-  BOTP单据下推，内部招聘系统单据审批通过以后，需要生成调动单进行职位的调动，通过BOTP进行单据映射，自动生成调动单
- 基于**Redis**实现数据缓存，提高读多写少类型的数据的查询效率，例如弱校验弹窗开关，任岗模式校验开关等参数配置，从数据库查询以后放入缓存，在配置更新以后才更新缓存内容和数据库数据。

**个人职责**：

- 调动二开扩展性支持代码重构
- 调动异常补偿需求开发
- 内部招聘单据下推调动需求开发
- 批量调动相关需求开发

 

亮点和难点





**项目介绍**：平台的引入功能只能对单个sheet进行导入，为了满足业务对多sheet引入的需求，我们增加了多sheet引入的功能，用户现在可以下载预置的模板，上传包含多个sheet的Excel文件，并点击导入按钮，系统会将数据存入数据库并返回导入的结果。这一功能已经在星瀚HR多个部门广泛应用，为各个部门提供了更便捷、高效的数据导入解决方案。

**设计技术**：

- 通过页面配置实现了导入字段的定制化，采用了模板模式以留抽象接口的方式，在关键事件中实现了高度扩展性，为其他业务模块提供了更灵活的支持
- 通过使用阻塞队列LinkedBlockingQueue和线程池，实现了数据的有序处理和线程的复用，优化了系统资源的利用效率。
- 采用了异步任务处理方式，提高了系统的并发处理能力和响应速度，有效避免了数据处理过程中的阻塞情况。这项优化措施使得10万条数据的引入时间从原来的15秒缩短至4秒左右，为系统性能带来了显著提升

**技术栈**：多线程，模板模式、

 

难点和亮点

1. 